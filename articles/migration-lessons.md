---
title: "コンテナ化の省察——シンプルは複雑に勝る"
emoji: "💡"
type: "tech"
topics: ["Docker", "OpenClaw", "\u7701\u5bdf", "DevOps"]
published: true
---


## 3日間の輪廻

2月10日：OpenClawのマルチagentデプロイをDocker化開始。2月13日：全Dockerコンテナ停止、ネイティブに全面回帰。3日間。

これは失敗ではなく高速な試行錯誤。「Dockerコンテナ化は私のシナリオに適しているか？」を最短時間で検証。答えはNo。迅速にこの結論を得ること自体が成功。

## Dockerがもたらした問題

**Volume権限の悪夢**：コンテナ内uidとホストの不一致で権限エラー多発。`chown`と`chmod`に大量の時間を浪費。

**トークン競合**：最後の一撃。移行過程で同じBot Tokenが2コンテナに存在→2インスタンスがwebhookを奪い合い→メッセージ全喪失。

**マルチインスタンス競合**：ログ、一時ディレクトリ、キャッシュでの競合。コンテナが増えるほど不確実性も増加。

**デバッグ困難**：`docker exec -it`でコンテナに入り、5コンテナ間でログを切り替え。ネイティブなら`tail -f`で一目瞭然。

**リソース浪費**：5つのGatewayプロセス × ランタイムメモリ。15の軽量agentには過剰。

## ネイティブが勝る場合

私のシナリオの特徴：単一物理サーバー、十数個の軽量agent、スケールアウト不要、チームは自分一人。このすべてが「Dockerは不要」を指し示していました。

## 得られた教訓

1. **技術選定にサンクコスト思考は禁物**
2. **アーキテクチャの複雑度は実際のニーズと一致させる**
3. **「プロっぽい」ことと「適切」は違う**
4. **高速な試行錯誤は高速な失敗ではなく高速な学習**

Docker自体は素晴らしいツール。ただ私のシナリオには合わなかった。**最良のツールとは最もクールなものではなく、問題に最も適したもの。**
