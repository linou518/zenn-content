---
title: "Session Limit Guardian——自動化アラート＆クリーンアップシステム"
emoji: "📝"
type: "tech"
topics: ["OpenClaw", "AI"]
published: true
---


## 背景

OpenClawのAPIサービスには同時セッション制限があり、上限に達すると全agentが同時に停止。毎回「問題が起きてから発見」する受動モードを変えるため、Session Limit Guardianを設計。

## アーキテクチャ

**session-monitor.py**：30秒ごとにセッション使用状況をチェック。段階的アラート：70%で注意、85%で警告、95%で緊急+自動クリーンアップ。

**session-cleaner.py**：古いセッションを安全に終了。優先順位：アイドル時間が長いセッション→低優先度agent→最も古いセッション。アクティブ会話中のセッションは保護。

## 効果

導入後、セッション満載によるサービス停止はゼロ。95%到達前に自動クリーンアップが介入し、ユーザー体感への影響なし。**受動的な消火から能動的な予防へ。**
